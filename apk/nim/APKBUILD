# Contributor: Watanabe Takashi <wtnb75@gmail.com>
# Maintainer:
pkgname=nim
pkgver=1.6.4
pkgrel=0
pkgdesc="Nim is a statically typed compiled systems programming language"
url="https://nim-lang.org/"
arch="all"
license="MIT"
depends="gcc musl-dev"
makedepends=""
install=""
subpackages=""
source="https://nim-lang.org/download/${pkgname}-${pkgver}.tar.xz"
builddir="${srcdir}/${pkgname}-${pkgver}"

build() {
	cd "$builddir"
	sh build.sh
	./bin/nim c koch
	./koch boot -d:release
	./koch tools
}

check() {
	# cd "$builddir"
	# python3 setup.py test
	:
}

package() {
	cd "$builddir"
	./koch geninstall
	sh install.sh ${pkgdir}/usr
	mkdir -p ${pkgdir}/usr/bin/
	ln -s ../nim/bin/nim ${pkgdir}/usr/bin/nim
}

sha512sums="
f4d082f37f0e675e8cdb4340d67f2e58b5e6ac5bb51dab1ded5417097f3b86d71fa585ef12ee1c3cd5b17285589cbe9d5658fcb29c98547f7967a1b6f0cb4646  nim-1.6.4.tar.xz
"
